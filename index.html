<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Interactive Robotics Algorithms</title>


    <!-- Bootstrap CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.0/css/bootstrap-slider.css">
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous">

    <!-- Materialized CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

    <!--Bootstrap Slider JavaScript-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.0/bootstrap-slider.min.js"></script>

    <!--jQuery appear plugin-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.appear/0.3.3/jquery.appear.min.js"></script>

    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <!-- Compiled and Materialized minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>

    <!-- Customized CSS -->
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

    <!-- Core Javascript -->
    <script src="general/js/map_data.js"></script>
    <script src='general/js/path_data.js'></script>
    <script src="general/js/utils.js"></script>
    <script src="general/js/view.js"></script>
    <script src="general/js/odometry.js"></script>
    <script src="general/js/measurement.js"></script>
    <script src="general/js/particle.js"></script>
    <script src="general/js/particle_filter.js"></script>
    <script src="general/js/robot.js"></script>

    <script src="demo/js/demo_controls.js"></script>
    <script src="demo/js/robot_demo.js"></script>
    <script src="demo/js/sensor_demo.js"></script>
    <script src="demo/js/actuation_demo.js"></script>
    <script src="demo/js/measurement_beam_demo.js"></script>

    <script>
        $(document).ready(function () {
            $('.tooltipped').tooltip({delay: 50, position: "top"});
            $(".col ul").addClass("collection");
            $("ul.collection li").addClass("collection-item")
        });
    </script>
</head>
<body onload="init();">
<!--nav class="black" role="navigation">
    <div class="nav-wrapper container">
        <a id="title-container" href="#" data-activates="nav-mobile"
           class="brand-logo left">Home</a>
    </div>
</nav-->

<div id="index-banner" class="parallax-container">
    <div class="section no-pad-bot">
        <div class="container">
            <div class="row">
                <div class="col l12">
                    <h1>Mobile Robot Localization</h1>
                    <h4>An Interactive Explanation</h4>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">

    <div class="row">
        <div class="col l12">
            <p>
            What would you do if you lost your way in a city while trying to navigate from one landmark to another? The obvious solution is to take out your phone and use the GPS system to find your way. But what if your phone was out of battery? Worse yet, what if you were indoors trying to find a particular room, and the GPS isn't able to give you sufficiently accurate instructions? With a map and some keen observation skills, you'd probably be able to find your way.
            </p>

            <p>
            Just as how humans rely on knowing our location to find our way, autonomous robots require the same information in order to efficiently and correctly function. Tasks like path planning, or even as simple as finding the next turn, require detailed information on a robot's location. On the other hand, many autonomous robots (especially those operating indoors) rarely have access to sufficiently accurate GPS data - or any GPS data at all. Therefore, robots often utilize on-board sensors to observe the environment, like how we use our eyes to reason about our location. 
            </p>
            
            <p>The problem of estimating where a robot is, given its on-board sensor readings over time, is called <b>mobile robot localization</b>. While the task may seem straightforward, there are many sources of potential errors that comes with using sensors, and researchers have developed many algorithms that aim to reduce uncertainty. In this page, we will explain two major sources of uncertainty - motion and sensors - in mobile robot localiztion problems, and a popular algorithm called <b>Monte-Carlo Localization</b> that addresses this issue. 
            </p>
        </div>
    </div>

</div>

<div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
        <div class="container">
            <div class="row">
                <div class="col l12">
                    <h2 style="color:black">Sources of Uncertainty</h2>
                    <!-- <p style="color:black">
                        As physical objects in the real world, robots inherently suffer from errors in <b>locomotion</b> and <b>sensing</b>. In the following sections, we will discuss how these two sources of uncertainty affect robots' ability to accurately reason about its location.
                    </p> -->
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col l12">
            <h3>Uncertainty Arising From Motion</h3>
            <!--When we command robots to move forward and turn, it would be nice if robots can-->
            <!--carry out our commands with perfect precision. But in reality, they can't.-->
            <p>
                Uncertainty in a robotâ€™s motion arises from a large number of factors, such as differences in wheel
                diameter, tire inflation, friction with respect to the ground, and uneven terrain. This is why robots rarely follow their planned paths exactly - when asked to execute the same command repeatedly, a robot will inevitably have errors in its actual execution.
            </p>

            <p>
                To illustrate this, the following demo simulates the errors in execution of motion commands on a real world robot. The blue line represents the planned motion, while the red line represents the robot's actual motion.
            </p>
        </div>
        <div class="col s6 offset-s3 center">
            <br>
            <canvas id="simple_actuation"></canvas>
            <button class="waves-effect waves-light btn-large"
                    onclick="simpleActuation.simulateActuation();">
                Simulate Robot Movement
            </button>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col l12 s12">
            <h6>The errors in execution of motion commands can be broken down into four components:</h6>
        </div>
    </div>
    <div class="row">
        <div class="col s12 m3">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">E1</span>
                    <p>
                        When the robot is commanded to rotate by a certain angle, the true rotation of the robot might
                        differ from the commanded angle.
                    </p>
                </div>
                <div class="card-action">
                    <a>Rotational error from rotational movement</a>
                </div>
            </div>
        </div>
        <div class="col s12 m3">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">E2</span>
                    <p>
                        When the robot is commanded to move straight by a certain distance, the robot may not drive
                        straight, and instead turn by some amount while traversing the commanded distance.
                    </p>
                </div>
                <div class="card-action">
                    <a>Rotational error from translational movement</a>
                </div>
            </div>
        </div>
        <div class="col s12 m3">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">E3</span>
                    <p>
                        When the robot is commanded to move straight by a certain distance, the robot may not move by
                        that same distance.
                    </p>
                </div>
                <div class="card-action">
                    <a>Translational error from translational movement</a>
                </div>
            </div>
        </div>
        <div class="col s12 m3">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">E4</span>
                    <p>
                        When the robot is commanded to rotate by a certain angle, the robot might skid sideways or forward while turning. This type of error is particularly significant on robots with tank treads
                        and multiple wheels with skid-steering.
                    </p>
                </div>
                <div class="card-action">
                    <a>Translational error from rotational movement</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col l12 s12">
            <p>
                You can see the impact of each of these types of error on a robotâ€™s motion. In the demos below, you can
                observe the impact of each type of error on the overall executed path of the robot. Try adjusting the
                slider to control the magnitude of the noise, and observe its impact on the path followed by the robot.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col l3 s12 center">
            <button class="btn-large waves-effect waves-light" onclick="simulateAllActuations();">
                Simulate All!
            </button>
        </div>
        <div class="col l9 s12">
            <div class="range-field">
                <br>
                <input id='actuation_noise' type="range" min="0" max="0.3" step="0.01"
                       title="Noise">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Rotational error from Rotation">E1</h6>
            <canvas id="actuation_a1"></canvas>
            <button class="btn waves-effect waves-light" onclick="a1Demo.simulateActuation();">
                <span class="glyphicon glyphicon-play"></span>
            </button>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Rotational error from Translation">E2</h6>
            <canvas id="actuation_a2"></canvas>
            <button class="btn waves-effect waves-light" onclick="a2Demo.simulateActuation();">
                <span class="glyphicon glyphicon-play"></span>
            </button>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Translational error from Translation">E3</h6>
            <canvas id="actuation_a3"></canvas>
            <button class="btn waves-effect waves-light" onclick="a3Demo.simulateActuation();">
                <span class="glyphicon glyphicon-play"></span>
            </button>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Translational error from Rotation">E4</h6>
            <canvas id="actuation_a4"></canvas>
            <button class="btn waves-effect waves-light" onclick="a4Demo.simulateActuation();">
                <span class="glyphicon glyphicon-play"></span>
            </button>
        </div>
    </div>

    <div class="row">
        <div class="col l12 s12">
            <p> 
                While the demos above simulated a single outcome of a robot at a time for each type of error, we can
                also concurrently simulate many possible outcomes for the errors. The demos below simulate each of the
                four types of errors in a robotâ€™s motion over many possible outcomes simultaneously. Pay particular attention to the range and distribution of the robotâ€™s possible locations over time as affected by the different types
                of motion errors.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Rotational error from Rotation">E1</h6>
            <canvas id="motion_a1_demo" width="1" height="1" class="tooltipped"
                    data-tooltip="Robots spread in many directions due to rotational error from rotational movements">
            </canvas>
            <div class="center">
                <button class="btn waves-effect waves-light"
                        onclick="a1MDemo.start(event);">
                    <span class="glyphicon glyphicon-play"></span>
                </button>
                <button class="btn waves-effect waves-light"
                        onclick="a1MDemo.stop(event);">
                    <span class="glyphicon glyphicon-repeat"></span>
                </button>
            </div>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Rotational error from Translation">E2</h6>
            <canvas id="motion_a2_demo" width="1" height="1" class="tooltipped"
                    data-tooltip="Robots going in all directions due to rotational error generated by moving forward"></canvas>
            <div class="center">
                <button class="btn waves-effect waves-light"
                        onclick="a2MDemo.start(event);">
                    <span class="glyphicon glyphicon-play"></span>
                </button>
                <button class="btn waves-effect waves-light"
                        onclick="a2MDemo.stop(event);">
                    <span class="glyphicon glyphicon-repeat"></span>
                </button>
            </div>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Translational error from Translation">E3</h6>
            <canvas id="motion_a3_demo" width="1" height="1" class="tooltipped"
                    data-tooltip="Robots dispersed along a line due to translational error">
            </canvas>
            <div class="center">
                <button class="btn waves-effect waves-light"
                        onclick="a3MDemo.start(event);">
                    <span class="glyphicon glyphicon-play"></span>
                </button>
                <button class="btn waves-effect waves-light"
                        onclick="a3MDemo.stop(event);">
                    <span class="glyphicon glyphicon-repeat"></span>
                </button>
            </div>
        </div>
        <div class="col l3 s6 center">
            <h6 class="tooltipped" data-tooltip="Translational error from Rotation">E4</h6>
            <canvas id="motion_a4_demo" width="1" height="1" class="tooltipped"
                    data-tooltip="Robots dispersed all over the place due to translational errors from rotating">
            </canvas>
            <div class="center">
                <button class="btn waves-effect waves-light"
                        onclick="a4MDemo.start(event);">
                    <span class="glyphicon glyphicon-play"></span>
                </button>
                <button class="btn waves-effect waves-light"
                        onclick="a4MDemo.stop(event);">
                    <span class="glyphicon glyphicon-repeat"></span>
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            Note how the errors accumulate over time: The possible outcomes of the robot diverged, but in a
            different manner for each type of motion error.
        </div>
    </div>

    <div class='row'>
        <div class="col l12 s12">
            <h4>Simulating A Robotâ€™s Motion On A Map</h4>
            <p>
                Putting together all the four types of errors in a robotâ€™s motion, we can simulate how a robotâ€™s path
                may diverge from its planned path, over time. In this demo, a robot is asked to follow a fixed
                trajectory(shown as the green path) in an indoor office building. The blue outlines are simulated
                outcomes of the robotâ€™s location over time. Note how the many simulated outcomes of the robotâ€™s location
                diverge over time. You may adjust the magnitude of each type of motion error, and see how it affects the
                outcomes.
            </p>
        </div>
    </div>

    <div class='row'>
        <div class="col l8 s12 center">
            <canvas id="motion_canvas" width="7" height="4"
                    class="tooltipped"
                    data-tooltip="Click PLAY to simulate some of the possible motions">
            </canvas>
            <button onclick="motionDemo.stop(event)" class="btn waves-effect waves-light red">
                <span class="glyphicon glyphicon-repeat"></span>
            </button>
            <button class="btn waves-effect waves-light blue disabled">
                <span class="glyphicon glyphicon-step-backward"></span>
            </button>
            <button onclick="motionDemo.start(event)" class="btn waves-effect waves-light">
                <span class="glyphicon glyphicon-play"></span>
            </button>
            <button onclick="motionDemo.stepForward(event)"
                    class="btn waves-effect waves-light blue">
                <span class="glyphicon glyphicon-step-forward"></span>
            </button>
        </div>
        <div class='col l4 s12'>
            <canvas id="motion_minicanvas" width="7" height="4"></canvas>
            <fieldset>
                <table>
                    <tbody>
                    <tr>
                        <td>
                            <label for="motion_stride">Moving Speed</label>
                        </td>
                        <td>
                            <input type='text' id="motion_stride"
                                   onblur='motionDemo.stride = Number(event.target.value);'
                                   value="0.04"
                                   data-slider-min="0.01" data-slider-max="0.5"
                                   data-slider-step="0.01"
                                   data-slider-value="0.04">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a1">Rotational error from rotation</label>
                        </td>
                        <td>
                            <input id='motion_a1' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a2">Rotational error from translation</label>
                        </td>
                        <td>
                            <input id='motion_a2' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a3">Translational error from translation</label>
                        </td>
                        <td>
                            <input id='motion_a3' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a4">Translational error from rotation</label>
                        </td>
                        <td>
                            <input id='motion_a4' value="1" type="text">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div class="row">
        <div class="col l12 s12">
            <p>
                This illustrates that robots cannot expect its true location to match its planned plath in order to work effectively. While there are many possible outcomes for the robot's location over time, it is still more likely to be in some location than others - this means that we can simulate the <b>distribution</b> of possible outcomes. This is important, as it sets the foundation for the localization algorithm we will discuss in a later section.  
            </p>
        </div>
    </div>

    <div class="row"><h3>Uncertainty in Sensor Readings</h3></div>

    <div class="row">
        <div class="col l12 s12">
            <h4>Sensor Limitations</h4>
            <p> 
                To reduce the uncertainty caused by motion, a robot would need more information about its surroundings than its theoretical path. This is where onboard sensors play a role in refining the distribution yielded from the last section by providing characteristics about its surroundings - for example, observing that the robot is right next to some solid object would make it less likely for the robot to be in the middle of an open room.
            </p>
            <p>
                Let's use laser rangefinders, a common onboard sensor, as an example to illustrate the uncertainties in sensor readings. A laser rangefinders measures distances by calculating the time it takes for a laser beam to travel between the sensor (the <i>sender</i>) and any obstacles (the <i>receiver</i>). By sweeping along a circular arc, laser rangefinders are able to measure distances for a relatively wide angle around a robot. However, laser rangefinders also have limitations - they have a maximum range due to light dispersion, and can usually only measure at fixed angles. 
            </p>
            <p>
                Much like locomotion, the measurements of laser rangefinders also carry errors of their own - for instance, variations in the optical properties of the obstacle, errors in time measurements from the electronics in the sensor, and even dust particles in the air. The demo below simulates multiple readings for a single ray of a laser rangefinder to an obstacle 10 meters away and graphs the frequency of corresponding readings. The red line denotes the expected value of 10 meters, and the numerical value in the top left hand corner is the average sensor value. Pay close attention to the relationship between the average and expected values, as well as the number of trials and expected value.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col l8 s12">
            <canvas id="sensor_demo"></canvas>
        </div>
        <div class="col l4 s12">
            <fieldset>
                <table>
                    <tbody>
                    <tr>
                        <td>
                            <label for="sensor_demo_sensorNoise">
                                Sensor Noise : </label>
                            <input id="sensor_demo_sensorNoise" type="text"
                                   value="2">
                        </td>
                    </tr>
                    <tr>
                        <td><input id="nSamples" type="text"
                                   value="100">
                            <label for="nSamples">
                                . Times </label>
                        </td>
                    </tr>
                    <tr>
                        <td class="center">
                            <button type="button" class="btn-large waves-effect waves-light center"
                                    onclick="sensorDemo.sample(Math.pow(10, Number(document.getElementById('nSamples').value)));">
                                Sense
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div class="row">
        <div class="col l12 s12">
            <p>
                We can see that the average sensor reading more closely matches the true distance when the sensor noise is low, and when the number of observations is high. Despite the errors in individual readings of the sensor, the average error over a large number of readings tends to zero as the number of readings increases. Also note that the graph is shaped like a bell curve - in fact, the distributions of the readings follow a known pattern called the <a href="https://en.wikipedia.org/wiki/Normal_distribution">normal
                distribution</a>.
            </p>
            <p>
                The types of uncertainties exhibited with laser rangefinders isn't unique - other types of sensors and data, like camera images or ultrasonic sensors, all have their sources of error and uncertainty. 
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col l12 s12">
            <h4>Simulating A Laser Rangefinder</h4>
            <p>
                Given a map and sensor data, we then need to develop a <i>sensor model</i>. Our previous demos showed that sensors are inherently noisy, meaning that we can't rely solely on measurements to localize the robot. Therefore, instead of making a definite decision, a sensor model is responsible for analyzing sensor data and providing the likelihood of the observation given a map and the knowledge that sensor readings may not necessarily be accurate. 
            </p>
            <p>
                <b>Click</b> to place the robot, and <b>hold and move</b> to change the direction of the robot. You can also use the <b>mini ,ap</b> on the right to move the map itelf. To look at the computed probability that the robot is located at a particular pixel, click on <b>color the map</b>.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col l8 s12">
            <canvas id="sensor_model_demo"></canvas>
        </div>
        <div class="col l4 s12">
            <canvas id="sensor_model_mini"></canvas>
            <fieldset>
                <table>
                    <tbody>
                    <tr>
                        <td>
                            <label for="nLasers">Number of Lasers</label>
                        </td>
                        <td>
                            <input id="nLasers" data-slider-value="18">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="sensorRadius">Sensor Radius</label>
                        </td>
                        <td>
                            <input id="sensorRadius" data-slider-value="3">
                        </td>
                        <td>m</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="sensorNoise">Sensor Noise</label>
                        </td>
                        <td>
                            <input id="sensorNoise" data-slider-value="0.1">
                        </td>
                        <td>m</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="colorRes">Coloring Resolution</label>
                        </td>
                        <td>
                            <input id="colorRes" data-slider-value="10">
                        </td>
                        <td>pixels</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="shouldColor">Color the Map</label>
                        </td>
                        <td>
                            <div class="switch">
                                <label>
                                    Off
                                    <input type="checkbox" id="shouldColor"
                                           onchange='measurementDemo.setColoring(event.target.checked);'>
                                    <span class="lever blue"></span>
                                    On
                                </label>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>
</div>

<div class="container">
    <div class="row"><h2>Monte Carlo Localization</h2></div>
    <div class="row">
        <div class="col lg 8">
            <p>
                Given that all sensors - and robot movement itself - have some degree of uncertainty, how do we ensure that localization is consistent and robust? Over time, people have developed algorithms and
                mathematical models to take these uncertainties into account - <b>Monte Carlo
                Localization (MCL)</b> being one of them.
            </p>
            <p>
                The MCL algorithm can be applied to robots with the following conditions
            </p>
            <ul>
                <li>The robot is in a <b>known area</b>, which means the robot has the map of the
                    environment.
                </li>
                <li>The robot has <b>sensors</b>, no matter the form.</li>
                <li>The robot can <b>move around</b> freely.</li>
            </ul>
            <p>
                The MCL algorithms works by maintaining many possible locations of the robot. As the
                robot moves and senses, MCL incorporates additional information gathered and updates
                each of its possible locations. The possible locations that seem to be consistent
                with the robot's motion and measurement data will be kept, and vice versa.
            </p>
            <p>
                Each guess (or <i>hypothesis</i>) is represented by a "particle" consisting of
                location data (for instance in the form of Cartesian coordinates) of the robot, as well as its direction. Each
                particle is also associated with a weight, which represents the likelihood that the particle
                represents the robot's true location and direction. 
            </p>
            <h4>
                Outline of the MCL algorithm at each time step
            </h4>

            <ol>
                <li>
                    If the robot moves, the algorithm <b>updates each particle's location and direction
                    according to the robot's motion</b>. When updating, <u>uncertainties
                    of motion readings are also taken into consideration.</u>
                </li>
                <li>
                    If the robot has performed a scan of the environment, the algorithm <b>updates each particle's
                    weight</b> according to the sensor readings.
                    The new weight is associated with <u>the probability that the robot is at the particle's location given the scanned data</u>.
                </li>
                <li>
                    Create a new set of particles with equal size by selecting particles from the old set
                    according to the weights of the particles. Particles with higher weights are more likely
                    to be selected. This is called the <b>resampling process</b>. If all particles are clustered around a small region after resampling, it is likely that the robot's location is within the region.
                </li>
            </ol>
            <br/>
            <p>
                Experiment with MCL's performance in the demo below and compare the robot's localization performance with the demos above. Even at higher levels of noise, the MCL algorithm is able to provide a good estimate of the robot's location on the map, and is able to account for errors during motion and sensing. Furthermore, unlike the earlier demos, performance doesn't degrade significantly over time - the predicted region remains fairly small over time. 
            </p>
        </div>
    </div>
    <div class='row'>
        <div class="col l8 s12">
            <canvas id="mcl_canvas" width="7" height="4"></canvas>
            <p class="center">
                <button onclick="mclDemo.stop(event);" class="btn waves-effect waves-light red">
                    <span class="glyphicon glyphicon-repeat"></span>
                </button>
                <button class="btn waves-effect waves-light blue disabled">
                    <span class="glyphicon glyphicon-step-backward"></span>
                </button>
                <button onclick="mclDemo.start(event);" class="btn waves-effect waves-light">
                    <span class="glyphicon glyphicon-play"></span>
                </button>
                <button onclick="mclDemo.stepForward(event);"
                        class="btn waves-effect waves-light blue">
                    <span class="glyphicon glyphicon-step-forward"></span>
                </button>
            </p>
            <span id="probability"></span>
        </div>
        <div class='col l4 s12'>
            <canvas id="mcl_minicanvas" width="70" height="27"></canvas>
            <fieldset>
                <table>
                    <tbody>
                    <tr>
                        <td>
                            <label for="mcl_nParticles"># of particles</label>
                        </td>
                        <td>
                            <input type='text' id="mcl_nParticles"
                                   onblur='mclDemo.setParticleCount(Number(event.target.value));'
                                   onkeypress='return isNumber(event);'
                                   class="form-control" value="500"
                                   size="3" style="padding: 0">
                        </td>
                    </tr>
                    <!--<tr>-->
                    <!--<td>-->
                    <!--<label for="mcl_pRatio">% of particles-->
                    <!--resampled-->
                    <!--</label>-->
                    <!--</td>-->
                    <!--<td>-->
                    <!--<input type='text' id="mcl_pRatio" data-slider-value="0.9">-->
                    <!--</td>-->
                    <!--</tr>-->
                    <tr>
                        <td>
                            <label for="mcl_stride">Speed</label>
                        </td>
                        <td>
                            <input type='text' id="mcl_stride" value="0.04">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_a1">Rotational error from
                                rotation
                            </label>
                        </td>
                        <td>
                            <input id='mcl_a1' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_a2">Rotational error from
                                translation
                            </label>
                        </td>
                        <td>
                            <input id='mcl_a2' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_a3">Translational error from
                                translation
                            </label>
                        </td>
                        <td>
                            <input id='mcl_a3' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_a4">Translational error from
                                rotation
                            </label>
                        </td>
                        <td>
                            <input id='mcl_a4' value="1" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_sensorRadius">Sensor Radius</label>
                        </td>
                        <td>
                            <input id="mcl_sensorRadius" type="text" data-slider-value="3">
                        </td>
                    </tr>
                    <tr>
                        <td><label for="mcl_sensorNoise">Sensor Noise</label>
                        </td>
                        <td><input type='text' id="mcl_sensorNoise" data-slider-value="0.2"></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_colorRes">Coloring
                                Resolution
                            </label>
                        </td>
                        <td>
                            <input type="text" id="mcl_colorRes" data-slider-value="10">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="mcl_shouldColor"
                                   class="custom-control custom-checkbox">Color
                                the Map</label>
                        </td>
                        <td>
                            <div class="switch">
                                <label>
                                    Off
                                    <input id="mcl_shouldColor"
                                           onchange='mclDemo.setColoring(event.target.checked);'
                                           type="checkbox">
                                    <span class="lever blue"></span>
                                    On
                                </label>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>
</div>
<footer class="page-footer white">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
              Developed by 
              <a href="//www.joydeepb.com">Joydeep</a>,
              <a href="mailto:zhangxp1998@gmail.com">Kelvin</a>, and
              <a href="mailto:ziweihe@umass.edu">William</a>.
            </div>
        </div>
    </div>
</footer>
</body>
</html>
